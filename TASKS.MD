# TASKS.MD - Melhorias da Codebase

## üìã Vis√£o Geral
Este documento cont√©m todas as tarefas identificadas para melhorar a codebase, organizadas por prioridade e fase de implementa√ß√£o.

## ÔøΩÔøΩ Objetivos
- Melhorar a manutenibilidade do c√≥digo
- Aumentar a reutiliza√ß√£o de componentes
- Otimizar performance e UX
- Padronizar internacionaliza√ß√£o
- Implementar boas pr√°ticas de arquitetura

---

## üî¥ FASE 1: REFATORA√á√ÉO CR√çTICA (Alta Prioridade)

### 1.1 Backend - Internacionaliza√ß√£o Completa
**Arquivo:** `backend/src/controllers/postController.ts`
**Descri√ß√£o:** Converter todas as mensagens de erro e sucesso para ingl√™s
**Detalhes:**
- Linha 45: "Post criado com sucesso" ‚Üí "Post created successfully"
- Linha 58: "Post atualizado com sucesso" ‚Üí "Post updated successfully"
- Linha 71: "Post deletado com sucesso" ‚Üí "Post deleted successfully"
- Verificar se h√° outras mensagens em portugu√™s

**Arquivo:** `backend/src/services/postService.ts`
**Descri√ß√£o:** Converter todas as mensagens de erro para ingl√™s
**Detalhes:**
- Linha 15: "Erro ao buscar posts" ‚Üí "Error fetching posts"
- Linha 32: "Post n√£o encontrado" ‚Üí "Post not found"
- Linha 35: "Erro ao buscar post" ‚Üí "Error fetching post"
- Linha 48: "Erro ao criar post" ‚Üí "Error creating post"
- Linha 67: "Erro ao atualizar post" ‚Üí "Error updating post"
- Linha 85: "Erro ao deletar post" ‚Üí "Error deleting post"
- Linha 130: "Erro ao buscar posts" ‚Üí "Error searching posts"
- Linha 145: "Erro ao contar posts publicados" ‚Üí "Error counting published posts"
- Linha 155: "Erro ao contar rascunhos" ‚Üí "Error counting drafts"

**Arquivo:** `backend/src/index.ts`
**Descri√ß√£o:** Converter logs de console para ingl√™s
**Detalhes:**
- Linha 47: "Rota n√£o encontrada" ‚Üí "Route not found"
- Linha 52: "Servidor rodando na porta" ‚Üí "Server running on port"
- Linha 53: "Health check:" ‚Üí "Health check:"
- Linha 54: "Posts API:" ‚Üí "Posts API:"
- Linha 55: "Search API:" ‚Üí "Search API:"
- Linha 56: "Stats API:" ‚Üí "Stats API:"
- Linha 57: "API Base URL:" ‚Üí "API Base URL:"
- Linha 58: "Iniciado em:" ‚Üí "Started at:"

### 1.2 Frontend - Extrair Hooks Customizados
**Arquivo:** `frontend/src/hooks/usePosts.ts` (NOVO)
**Descri√ß√£o:** Criar hook customizado para gerenciar posts
**Detalhes:**
- Extrair toda a l√≥gica de posts do App.tsx
- Incluir: queries, mutations, filtros, pagina√ß√£o
- Retornar: posts, loading, error, handlers
- Manter estado local: searchQuery, currentPage, publishedFilter
- Implementar handlers: handleSearchChange, handlePageChange, handleFilterChange

**Arquivo:** `frontend/src/hooks/usePostMutations.ts` (NOVO)
**Descri√ß√£o:** Criar hook para gerenciar mutations de posts
**Detalhes:**
- Extrair createMutation, updateMutation, deleteMutation
- Incluir handlers: handleCreate, handleUpdate, handleDelete
- Gerenciar loading states das mutations
- Retornar mutations e handlers

**Arquivo:** `frontend/src/hooks/usePostModal.ts` (NOVO)
**Descri√ß√£o:** Criar hook para gerenciar estado do modal
**Detalhes:**
- Gerenciar: isModalOpen, editingPost
- Handlers: openModal, closeModal, setEditingPost
- Reset form quando modal fecha
- Retornar estado e handlers

### 1.3 Frontend - Refatorar App.tsx
**Arquivo:** `frontend/src/App.tsx`
**Descri√ß√£o:** Simplificar componente principal usando hooks customizados
**Detalhes:**
- Importar hooks customizados criados
- Remover l√≥gica duplicada
- Manter apenas renderiza√ß√£o e composi√ß√£o
- Reduzir de ~176 linhas para ~80 linhas
- Manter estrutura de componentes

### 1.4 Frontend - Separar Modal em Componentes
**Arquivo:** `frontend/src/components/Modal.tsx`
**Descri√ß√£o:** Converter para componente gen√©rico
**Detalhes:**
- Remover l√≥gica espec√≠fica de posts
- Props gen√©ricas: isOpen, onClose, title, children
- Manter apenas estrutura do modal
- Remover form logic

**Arquivo:** `frontend/src/components/PostForm.tsx` (NOVO)
**Descri√ß√£o:** Criar componente espec√≠fico para formul√°rio de posts
**Detalhes:**
- Mover toda a l√≥gica de formul√°rio do Modal
- Props: post, onSubmit, isLoading
- Incluir valida√ß√£o de campos
- Manter estados: formData, handleChange, handleSubmit

**Arquivo:** `frontend/src/components/PostModal.tsx` (NOVO)
**Descri√ß√£o:** Criar wrapper que combina Modal + PostForm
**Detalhes:**
- Usar Modal gen√©rico
- Incluir PostForm como children
- Gerenciar t√≠tulo din√¢mico (Edit/New)
- Props: isOpen, onClose, onSubmit, post, isLoading

### 1.5 Frontend - Criar Utilit√°rios
**Arquivo:** `frontend/src/utils/filters.ts` (NOVO)
**Descri√ß√£o:** Criar utilit√°rio para filtros de posts
**Detalhes:**
- Fun√ß√£o filterPosts(posts, searchQuery, publishedFilter)
- L√≥gica de busca por t√≠tulo e conte√∫do
- Filtro por status de publica√ß√£o
- Retornar posts filtrados

**Arquivo:** `frontend/src/utils/pagination.ts` (NOVO)
**Descri√ß√£o:** Criar utilit√°rio para pagina√ß√£o
**Detalhes:**
- Fun√ß√£o paginatePosts(posts, page, itemsPerPage)
- Calcular: totalItems, totalPages, startIndex, endIndex
- Retornar posts paginados e metadados

---

## üü° FASE 2: MELHORIAS DE UX (M√©dia Prioridade)

### 2.1 Frontend - Implementar Filtros Visuais
**Arquivo:** `frontend/src/components/FilterBar.tsx` (NOVO)
**Descri√ß√£o:** Criar componente para filtros visuais
**Detalhes:**
- Filtro por status (All, Published, Drafts)
- Bot√µes de toggle para cada filtro
- Estado visual ativo/inativo
- Integrar com usePosts hook

**Arquivo:** `frontend/src/App.tsx`
**Descri√ß√£o:** Adicionar FilterBar ao layout
**Detalhes:**
- Posicionar entre SearchBar e PostList
- Conectar com handleFilterChange do hook
- Manter responsividade

### 2.2 Frontend - Melhorar Tratamento de Erros
**Arquivo:** `frontend/src/components/ErrorBoundary.tsx` (NOVO)
**Descri√ß√£o:** Criar ErrorBoundary para capturar erros React
**Detalhes:**
- Capturar erros de renderiza√ß√£o
- Mostrar fallback UI
- Log de erros para debugging
- Props: fallback, onError

**Arquivo:** `frontend/src/components/ErrorDisplay.tsx` (NOVO)
**Descri√ß√£o:** Componente para exibir erros de forma amig√°vel
**Detalhes:**
- Diferentes tipos de erro (network, validation, etc.)
- Bot√£o de retry
- Mensagens amig√°veis
- Props: error, onRetry

**Arquivo:** `frontend/src/components/ConfirmDialog.tsx` (NOVO)
**Descri√ß√£o:** Substituir confirm() nativo por modal customizado
**Detalhes:**
- Modal de confirma√ß√£o estilizado
- Props: isOpen, title, message, onConfirm, onCancel
- Integrar com delete post

### 2.3 Frontend - Adicionar Loading States
**Arquivo:** `frontend/src/components/LoadingSpinner.tsx` (NOVO)
**Descri√ß√£o:** Componente de loading reutiliz√°vel
**Detalhes:**
- Spinner animado
- Props: size (sm, md, lg), color
- Integrar com TailwindCSS

**Arquivo:** `frontend/src/components/SkeletonLoader.tsx` (NOVO)
**Descri√ß√£o:** Skeleton loading para posts
**Detalhes:**
- Placeholder animado para posts
- Props: count (n√∫mero de skeletons)
- Usar no PostList durante loading

### 2.4 Frontend - Melhorar Feedback Visual
**Arquivo:** `frontend/src/components/Toast.tsx` (NOVO)
**Descri√ß√£o:** Sistema de notifica√ß√µes toast
**Detalhes:**
- Diferentes tipos: success, error, warning, info
- Auto-dismiss
- Posicionamento configur√°vel
- Props: type, message, duration

**Arquivo:** `frontend/src/hooks/useToast.ts` (NOVO)
**Descri√ß√£o:** Hook para gerenciar toasts
**Detalhes:**
- showToast(type, message)
- hideToast(id)
- Gerenciar m√∫ltiplos toasts
- Retornar: showToast, hideToast, toasts

---

## üü¢ FASE 3: OTIMIZA√á√ïES (Baixa Prioridade)

### 3.1 Backend - Middleware de Valida√ß√£o
**Arquivo:** `backend/src/middlewares/validation.ts` (NOVO)
**Descri√ß√£o:** Middleware global para valida√ß√£o
**Detalhes:**
- Valida√ß√£o autom√°tica baseada em schemas Zod
- Middleware factory para diferentes schemas
- Tratamento de erros de valida√ß√£o
- Integrar com controllers

**Arquivo:** `backend/src/routes/posts.ts`
**Descri√ß√£o:** Aplicar middleware de valida√ß√£o
**Detalhes:**
- Adicionar valida√ß√£o em todas as rotas
- Remover valida√ß√£o manual dos controllers
- Manter schemas existentes

### 3.2 Frontend - Otimizar React Query
**Arquivo:** `frontend/src/services/postsApi.ts`
**Descri√ß√£o:** Melhorar configura√ß√£o do React Query
**Detalhes:**
- Adicionar staleTime e cacheTime
- Implementar retry logic
- Melhorar query keys
- Adicionar optimistic updates

**Arquivo:** `frontend/src/App.tsx`
**Descri√ß√£o:** Configurar QueryClient com op√ß√µes otimizadas
**Detalhes:**
- defaultOptions para queries e mutations
- Retry configuration
- Cache configuration
- Error handling global

### 3.3 CSS - Design System
**Arquivo:** `frontend/src/index.css`
**Descri√ß√£o:** Expandir classes utilit√°rias
**Detalhes:**
- Adicionar mais variantes de bot√µes
- Criar classes para cards, inputs, modals
- Definir espa√ßamentos consistentes
- Adicionar anima√ß√µes

**Arquivo:** `frontend/src/components/ui/Button.tsx` (NOVO)
**Descri√ß√£o:** Componente base para bot√µes
**Detalhes:**
- Variantes: primary, secondary, danger, ghost
- Tamanhos: sm, md, lg
- Estados: loading, disabled
- Props: variant, size, loading, disabled, children

**Arquivo:** `frontend/src/components/ui/Input.tsx` (NOVO)
**Descri√ß√£o:** Componente base para inputs
**Detalhes:**
- Tipos: text, textarea, checkbox
- Estados: error, disabled
- Valida√ß√£o visual
- Props: type, error, disabled, placeholder

### 3.4 TypeScript - Melhorar Tipos
**Arquivo:** `frontend/src/types/post.ts`
**Descri√ß√£o:** Melhorar defini√ß√µes de tipos
**Detalhes:**
- Adicionar branded types para IDs
- Criar tipos mais espec√≠ficos
- Adicionar valida√ß√£o de tipos
- Remover any types

**Arquivo:** `backend/src/types/post.ts`
**Descri√ß√£o:** Melhorar schemas Zod
**Detalhes:**
- Adicionar mensagens de erro customizadas
- Melhorar valida√ß√µes
- Adicionar transforma√ß√µes
- Criar schemas reutiliz√°veis

---

## üîß FASE 4: TESTES E DOCUMENTA√á√ÉO

### 4.1 Frontend - Testes Unit√°rios
**Arquivo:** `frontend/src/__tests__/hooks/usePosts.test.ts` (NOVO)
**Descri√ß√£o:** Testes para hook usePosts
**Detalhes:**
- Testar filtros
- Testar pagina√ß√£o
- Testar handlers
- Mock React Query

**Arquivo:** `frontend/src/__tests__/components/PostForm.test.tsx` (NOVO)
**Descri√ß√£o:** Testes para PostForm
**Detalhes:**
- Testar valida√ß√£o
- Testar submit
- Testar estados
- Mock props

### 4.2 Backend - Testes de Integra√ß√£o
**Arquivo:** `backend/src/__tests__/controllers/postController.test.ts` (NOVO)
**Descri√ß√£o:** Testes para PostController
**Detalhes:**
- Testar todas as rotas
- Mock Prisma
- Testar valida√ß√£o
- Testar erros

### 4.3 Documenta√ß√£o
**Arquivo:** `docs/ARCHITECTURE.md` (NOVO)
**Descri√ß√£o:** Documentar arquitetura do projeto
**Detalhes:**
- Estrutura de pastas
- Padr√µes utilizados
- Decis√µes de design
- Guias de contribui√ß√£o

---

## üìä M√©tricas de Sucesso

### Quantitativas:
- Reduzir App.tsx de 176 para <80 linhas
- Aumentar cobertura de testes para >80%
- Reduzir duplica√ß√£o de c√≥digo em 50%
- Melhorar performance (Lighthouse score >90)

### Qualitativas:
- C√≥digo mais leg√≠vel e manuten√≠vel
- Componentes reutiliz√°veis
- Melhor experi√™ncia do usu√°rio
- Arquitetura escal√°vel

---

## ÔøΩÔøΩ Ordem de Implementa√ß√£o Recomendada

1. **Fase 1.1**: Internacionaliza√ß√£o Backend
2. **Fase 1.2**: Hooks Customizados
3. **Fase 1.3**: Refatorar App.tsx
4. **Fase 1.4**: Separar Modal
5. **Fase 1.5**: Utilit√°rios
6. **Fase 2.1**: Filtros Visuais
7. **Fase 2.2**: Tratamento de Erros
8. **Fase 2.3**: Loading States
9. **Fase 2.4**: Toast Notifications
10. **Fase 3.1**: Middleware Valida√ß√£o
11. **Fase 3.2**: Otimizar React Query
12. **Fase 3.3**: Design System
13. **Fase 3.4**: Melhorar Tipos
14. **Fase 4**: Testes e Documenta√ß√£o

---

## ÔøΩÔøΩ Notas de Implementa√ß√£o

- Manter compatibilidade com funcionalidades existentes
- Testar cada mudan√ßa antes de prosseguir
- Documentar breaking changes
- Seguir padr√µes de commit sem√¢ntico
- Revisar c√≥digo ap√≥s cada fase

---

## ‚úÖ Checklist de Conclus√£o

- [ ] Fase 1 completa
- [ ] Fase 2 completa
- [ ] Fase 3 completa
- [ ] Fase 4 completa
- [ ] Testes passando
- [ ] Documenta√ß√£o atualizada
- [ ] Code review final
- [ ] Deploy em produ√ß√£o
